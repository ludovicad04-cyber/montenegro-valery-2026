<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <meta name="format-detection" content="telephone=no" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <title>Roadtrip in Montenegro - 6 Giorni Ottimizzati</title>

  <!-- Leaflet CSS -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" crossorigin="" />

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;700;900&family=Inter:wght@400;600;700&display=swap" rel="stylesheet">

  <style>
    :root{
      --green-dark:#1a472a;
      --green-bright:#22c55e;
      --cream:#fef7ed;
      --white:#fff;
      --black:#000;
      --font-main: 'Inter', system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", sans-serif;
      --font-display: 'Fredoka', system-ui, cursive;
      --max-width: 1200px;
      --gap: 16px;
    }

    /* reset & box sizing */
    *,*::before,*::after{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family:var(--font-main);
      color:var(--black);
      background:var(--white);
      -webkit-font-smoothing:antialiased;
      line-height:1.5;
      overflow-x:hidden;
      font-size:clamp(15px, 2vw, 18px); /* fluid base size */
    }

    a{color:inherit}

    /* Accessible reduced motion */
    @media (prefers-reduced-motion: reduce){
      *{animation:none!important; transition:none!important}
    }

    /* CONTAINER */
    .wrap{
      max-width:var(--max-width);
      margin:0 auto;
      padding:20px;
    }

    /* Loading overlay (less intrusive) */
    .loading-screen{
      position:fixed;
      inset:0;
      display:flex;
      align-items:center;
      justify-content:center;
      background:linear-gradient(180deg,var(--green-dark), rgba(26,71,42,0.95));
      color:var(--white);
      z-index:1200;
      padding:20px;
      transition:opacity .4s ease, visibility .4s;
      gap:16px;
    }
    .loading-screen.hidden{opacity:0; visibility:hidden; pointer-events:none}
    .loading-card{
      width:min(620px,95%);
      border-radius:14px;
      padding:18px;
      text-align:center;
      background:rgba(255,255,255,0.04);
      backdrop-filter: blur(6px);
    }
    .loading-title{
      font-family:var(--font-display);
      margin:0 0 8px;
      font-size:clamp(22px,4vw,36px);
      letter-spacing:-1px;
    }
    .loading-sub{
      margin:0 0 12px;
      font-size:clamp(13px,2vw,16px);
      opacity:.95;
    }
    .progress{
      height:6px;
      width:100%;
      background:rgba(255,255,255,0.12);
      border-radius:6px;
      overflow:hidden;
    }
    .progress > span{
      display:block;
      width:0%;
      height:100%;
      background:rgba(255,255,255,0.9);
      transition:width 2s linear;
    }

    /* EMOJI CHE CADONO - CHRISTMAS ANIMATION */
    .falling-background {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      overflow: hidden;
    }

    .falling-item {
      position: absolute;
      animation: fall linear infinite;
      font-size: 24px;
      opacity: 0.8;
      user-select: none;
    }

    @keyframes fall {
      from {
        transform: translateY(-120px) rotate(0deg);
        opacity: 0.8;
      }
      to {
        transform: translateY(calc(100vh + 120px)) rotate(360deg);
        opacity: 0;
      }
    }

    .falling-item:nth-child(1) { left: 10%; animation-duration: 8s; animation-delay: 0s; }
    .falling-item:nth-child(2) { left: 20%; animation-duration: 12s; animation-delay: 2s; }
    .falling-item:nth-child(3) { left: 30%; animation-duration: 10s; animation-delay: 4s; }
    .falling-item:nth-child(4) { left: 40%; animation-duration: 15s; animation-delay: 1s; }
    .falling-item:nth-child(5) { left: 50%; animation-duration: 9s; animation-delay: 3s; }
    .falling-item:nth-child(6) { left: 60%; animation-duration: 11s; animation-delay: 5s; }
    .falling-item:nth-child(7) { left: 70%; animation-duration: 13s; animation-delay: 0.5s; }
    .falling-item:nth-child(8) { left: 80%; animation-duration: 14s; animation-delay: 2.5s; }
    .falling-item:nth-child(9) { left: 90%; animation-duration: 7s; animation-delay: 4.5s; }
    .falling-item:nth-child(10) { left: 15%; animation-duration: 16s; animation-delay: 1.5s; }
    .falling-item:nth-child(11) { left: 25%; animation-duration: 6s; animation-delay: 3.5s; }
    .falling-item:nth-child(12) { left: 35%; animation-duration: 18s; animation-delay: 0.8s; }

    /* HERO */
    .hero{
      background:var(--green-dark);
      color:var(--white);
      display:flex;
      align-items:center;
      justify-content:center;
      text-align:center;
      padding: clamp(40px,10vh,120px) 20px;
    }
    .hero h1{
      margin:0;
      font-family:var(--font-display);
      font-size:clamp(34px,8vw,64px);
      line-height:1;
      letter-spacing:-1px;
      color:var(--cream);
    }
    .hero p.lead{
      margin:12px 0 0;
      font-size:clamp(14px,2.2vw,20px);
      text-transform:uppercase;
      letter-spacing:2px;
    }

    /* sections */
    section{padding:40px 0;}
    .checkerboard{height:28px;background:repeating-linear-gradient(90deg,var(--green-dark) 0 20px,var(--white) 20px 40px)}
    .card{
      background:var(--white);
      border-radius:12px;
      box-shadow:0 8px 30px rgba(0,0,0,0.08);
      padding:20px;
    }

    /* responsive image */
    .hero-image img, .card img{
      width:100%;
      height:auto;
      display:block;
      border-radius:10px;
      object-fit:cover;
    }

    /* trip details grid */
    .grid{
      display:grid;
      grid-template-columns:repeat(3,1fr);
      gap:16px;
    }
    .grid .mini{
      text-align:center;
      padding:18px;
      border-radius:10px;
      background:rgba(255,255,255,0.95);
    }

    /* map */
    #map{
      width:100%;
      height:clamp(250px,40vh,520px);
      border-radius:12px;
      border:1px solid #e6e6e6;
    }

    /* day cards */
    .days{display:grid;grid-template-columns:1fr;gap:16px}
    .day{
      background:var(--white);
      border-radius:12px;
      padding:16px;
      box-shadow:0 8px 30px rgba(0,0,0,0.06);
    }
    .day .head{display:flex;gap:12px;align-items:center}
    .day .num{
      min-width:44px;height:44px;border-radius:50%;display:flex;align-items:center;justify-content:center;color:white;font-weight:700;
      background:linear-gradient(135deg,#16a34a,#059669);
      box-shadow:0 6px 18px rgba(0,0,0,0.12);
      font-size:16px;
    }
    .day h4{margin:0;font-size:1rem}
    .location{color:var(--green-dark);margin:8px 0;font-weight:600}
    .activities{padding-left:18px;margin:10px 0 0;list-style:none}
    .activities li{position:relative;padding:6px 0 6px 20px}
    .activities li::before{content:"‚úì";position:absolute;left:0;color:var(--green-bright);font-weight:700}

    /* footer */
    footer{padding:20px;text-align:center;color:#666}

    /* small screens */
    @media (max-width:900px){
      .grid{grid-template-columns:repeat(2,1fr)}
    }
    @media (max-width:680px){
      .grid{grid-template-columns:1fr}
      .wrap{padding:16px}
      .hero{padding: clamp(30px,12vh,60px) 12px}
      .loading-card{padding:14px}
      .loading-title{font-size:22px}
    }

    /* make interactive elements comfortably tappable */
    button, .mini, .day{touch-action:manipulation}

  </style>
</head>
<body>

  <!-- Loading (short & dismissible) -->
  <div id="loadingScreen" class="loading-screen" role="dialog" aria-live="polite">
    <!-- EMOJI CHE CADONO -->
    <div class="falling-background">
      <div class="falling-item">üéÑ</div>
      <div class="falling-item">üéÅ</div>
      <div class="falling-item">‚≠ê</div>
      <div class="falling-item">‚ùÑÔ∏è</div>
      <div class="falling-item">üéÑ</div>
      <div class="falling-item">üéÅ</div>
      <div class="falling-item">‚≠ê</div>
      <div class="falling-item">‚ùÑÔ∏è</div>
      <div class="falling-item">üéÑ</div>
      <div class="falling-item">üéÅ</div>
      <div class="falling-item">‚≠ê</div>
      <div class="falling-item">‚ùÑÔ∏è</div>
    </div>
    
    <div class="loading-card" role="document">
      <h2 class="loading-title">CIAO VALERY üßù‚Äç‚ôÄÔ∏è</h2>
      <p class="loading-sub">Gli elfi stanno preparando il tuo regalo ‚Äî quasi pronto!</p>
      <div class="progress" aria-hidden="true"><span id="progressBar"></span></div>
      <p style="margin-top:10px;font-size:0.9rem;opacity:.9">Tocca lo schermo per saltare l'animazione.</p>
    </div>
  </div>

  <!-- MAIN -->
  <main id="main" class="wrap" style="opacity:0;transition:opacity .35s ease">
    <!-- HERO -->
    <section class="hero">
      <div>
        <h1>MONTENEGRO</h1>
        <p class="lead">ROADTRIP 2026 ‚Äî Partiamo dalle basi..Sai dov'√® il Montenegro?</p>
      </div>
    </section>

    <div class="checkerboard"></div>

    <!-- Where -->
    <section>
      <div style="max-width:var(--max-width);margin:0 auto;">
        <div style="text-align:center;margin-bottom:20px">
          <h2 style="font-family:var(--font-display);font-size:clamp(20px,4vw,34px);margin:0;color:var(--green-dark)">ECCO DOVE SI TROVA!</h2>
          <p style="color:#666;margin-top:12px">Il Montenegro √® un piccolo gioiello nascosto nei Balcani, tra la Croazia e l'Albania</p>
        </div>

        <div class="card" style="overflow:hidden;margin-bottom:20px;">
          <img src="https://static2-viaggi.corriereobjects.it/wp-content/uploads/2015/06/8montenegro-sveti-stefan.jpg.webp?v=1710787222"
               alt="Sveti Stefan" loading="lazy">
          <div style="padding:14px;text-align:center">
            <h3 style="font-family:var(--font-display);margin:0;color:var(--green-dark)">ISOLOTTO DI SVETI STEFAN</h3>
            <p style="color:#666;margin:8px 0 0">Uno degli affacci pi√π famosi della costa del Montenegro</p>
          </div>
        </div>

        <div style="display:grid;grid-template-columns:repeat(3,1fr);gap:12px">
          <div class="card" style="text-align:center">
            <div style="font-size:28px;margin-bottom:8px">üó∫Ô∏è</div>
            <h4 style="margin:0;color:var(--green-dark)">POSIZIONE</h4>
            <p style="color:#666;margin:8px 0 0">Penisola balcanica, confina con Serbia, Bosnia, Croazia e Albania</p>
          </div>
          <div class="card" style="text-align:center">
            <div style="font-size:28px;margin-bottom:8px">üìè</div>
            <h4 style="margin:0;color:var(--green-dark)">DIMENSIONI</h4>
            <p style="color:#666;margin:8px 0 0">13.812 km¬≤ (come l'Abruzzo!)</p>
          </div>
          <div class="card" style="text-align:center">
            <div style="font-size:28px;margin-bottom:8px">üë•</div>
            <h4 style="margin:0;color:var(--green-dark)">POPOLAZIONE</h4>
            <p style="color:#666;margin:8px 0 0">Circa 630.000 abitanti</p>
          </div>
        </div>
      </div>
    </section>

    <div class="checkerboard"></div>

    <!-- Why -->
    <section>
      <div style="max-width:var(--max-width);margin:0 auto;text-align:center">
        <h2 style="font-family:var(--font-display);margin-bottom:12px;color:var(--green-dark)">PERCH√â MONTENEGRO?</h2>
        <p style="color:#666;margin-bottom:20px">La perla nascosta dei Balcani</p>

        <div style="display:grid;grid-template-columns:repeat(2,1fr);gap:12px">
          <div class="card">
            <div style="width:60px;height:60px;border-radius:50%;background:var(--green-bright);display:inline-flex;align-items:center;justify-content:center;font-size:28px;margin-bottom:12px">üöó</div>
            <h3 style="margin:0;color:var(--green-dark)">IL NOSTRO PRIMO ROADTRIP</h3>
            <p style="color:#666;margin-top:8px">Alla scoperta di luoghi autentici</p>
          </div>

          <div class="card">
            <div style="width:60px;height:60px;border-radius:50%;background:var(--green-bright);display:inline-flex;align-items:center;justify-content:center;font-size:28px;margin-bottom:12px">üèîÔ∏è</div>
            <h3 style="margin:0;color:var(--green-dark)">NATURA SELVAGGIA</h3>
            <p style="color:#666;margin-top:8px">Dalle vette alpine alle baie turchesi</p>
          </div>

          <div class="card">
            <div style="width:60px;height:60px;border-radius:50%;background:var(--green-bright);display:inline-flex;align-items:center;justify-content:center;font-size:28px;margin-bottom:12px">üèõÔ∏è</div>
            <h3 style="margin:0;color:var(--green-dark)">STORIA AUTENTICA</h3>
            <p style="color:#666;margin-top:8px">Citt√† UNESCO e fortezze medievali</p>
          </div>

          <div class="card">
            <div style="width:60px;height:60px;border-radius:50%;background:var(--green-bright);display:inline-flex;align-items:center;justify-content:center;font-size:28px;margin-bottom:12px">üç∑</div>
            <h3 style="margin:0;color:var(--green-dark)">SAPORI UNICI</h3>
            <p style="color:#666;margin-top:8px">Vini locali e cucina mediterranea</p>
          </div>
        </div>
      </div>
    </section>

    <div class="checkerboard"></div>

    <!-- Trip overview -->
    <section style="background:var(--green-dark);color:var(--white);padding:40px 0">
      <div style="max-width:var(--max-width);margin:0 auto;padding:12px">
        <h2 style="font-family:var(--font-display);text-align:center;margin:0 0 18px;color:var(--cream)">DETTAGLI DEL VIAGGIO</h2>
        <div style="display:grid;grid-template-columns:repeat(4,1fr);gap:12px">
          <div class="card" style="background:rgba(255,255,255,0.06);text-align:center">
            <div style="font-size:28px">üìÖ</div>
            <h4 style="margin:8px 0 0">Date</h4>
            <p style="margin:6px 0 0">1 - 6 Aprile 2026</p>
          </div>
          <div class="card" style="background:rgba(255,255,255,0.06);text-align:center">
            <div style="font-size:28px">‚è≥</div>
            <h4 style="margin:8px 0 0">Durata</h4>
            <p style="margin:6px 0 0">6 Giorni / 5 Notti</p>
          </div>
          <div class="card" style="background:rgba(255,255,255,0.06);text-align:center">
            <div style="font-size:28px">üìç</div>
            <h4 style="margin:8px 0 0">Pernottamenti</h4>
            <p style="margin:6px 0 0">Kotor (3) + Budva (2)</p>
          </div>
          <div class="card" style="background:rgba(255,255,255,0.06);text-align:center">
            <div style="font-size:28px">üöó</div>
            <h4 style="margin:8px 0 0">Distanza</h4>
            <p style="margin:6px 0 0">~550 km totali</p>
          </div>
        </div>
      </div>
    </section>

    <!-- Map -->
    <section>
      <div style="max-width:var(--max-width);margin:0 auto">
        <h2 style="font-family:var(--font-display);margin-bottom:12px;color:var(--green-dark)">LA MAPPA</h2>
        <p style="color:#666;margin-top:0">Il nostro percorso attraverso il Montenegro</p>

        <div style="margin-top:12px" class="card">
          <div id="map" aria-label="Mappa del roadtrip"></div>
        </div>

        <!-- legend (kept simple & responsive) -->
        <div style="margin-top:12px" class="card">
          <div style="display:flex;flex-wrap:wrap;gap:12px">
            <div style="display:flex;align-items:center;gap:10px"><div style="width:28px;height:28px;border-radius:50%;background:#E91E63"></div><strong>Giorno 1 - Arrivo</strong></div>
            <div style="display:flex;align-items:center;gap:10px"><div style="width:28px;height:28px;border-radius:50%;background:#FF9800"></div><strong>Giorno 2 - Vino</strong></div>
            <div style="display:flex;align-items:center;gap:10px"><div style="width:28px;height:28px;border-radius:50%;background:#FFC107"></div><strong>Giorno 3 - Perast</strong></div>
            <div style="display:flex;align-items:center;gap:10px"><div style="width:28px;height:28px;border-radius:50%;background:#4CAF50"></div><strong>Giorno 4 - Lovƒáen</strong></div>
            <div style="display:flex;align-items:center;gap:10px"><div style="width:28px;height:28px;border-radius:50%;background:#2196F3"></div><strong>Giorno 5 - Lago</strong></div>
            <div style="display:flex;align-items:center;gap:10px"><div style="width:28px;height:28px;border-radius:50%;background:#9C27B0"></div><strong>Giorno 6 - Partenza</strong></div>
          </div>
        </div>
      </div>
    </section>

    <div style="max-width:var(--max-width);margin:0 auto;padding:0 12px 40px">
      <div class="card" style="margin-bottom:12px">üöó <strong>Percorso Totale:</strong> Podgorica ‚Üí Kotor (3 notti) ‚Üí Budva (2 notti) ‚Üí Podgorica</div>

      <div class="days">
        <!-- Example day card (you have many - keep same structure) -->
        <article class="day">
          <div class="head">
            <div class="num" aria-hidden="true">1</div>
            <div>
              <h4>Mercoled√¨ 1 Aprile - Arrivo e Primo Assaggio di Kotor</h4>
            </div>
          </div>
          <div class="location">Podgorica ‚ûú Kotor (90 km, 1 ora e 30 minuti)</div>
          <ul class="activities">
            <li>Arrivo all'aeroporto di Podgorica e ritiro dell'auto a noleggio</li>
            <li>Viaggio panoramico verso Kotor attraverso le montagne</li>
            <li>Check-in e relax</li>
            <li>Passeggiata serale nel centro storico</li>
          </ul>
        </article>

        <!-- copy/paste your other .day cards here preserving markup -->
      </div>
    </div>

    <footer>
      üíù Creato con amore per Valery üíù
    </footer>
  </main>

  <!-- Leaflet JS -->
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" crossorigin=""></script>

  <script>
    // --- Loading behavior: short & skip on tap ---
    (function(){
      const loading = document.getElementById('loadingScreen');
      const progress = document.getElementById('progressBar');
      const main = document.getElementById('main');

      // animate progress to 100% quickly (demo-friendly)
      requestAnimationFrame(()=>progress.style.width = '100%');

      // automatically hide after 1800ms (1.8s) to improve UX on mobile
      const hideAfter = setTimeout(hideLoading, 1800);

      // allow touch to skip
      loading.addEventListener('click', () => {
        clearTimeout(hideAfter);
        hideLoading();
      }, {passive:true});

      function hideLoading(){
        loading.classList.add('hidden');
        main.style.opacity = '1';
        // remove node after transition
        setTimeout(()=>{ if(loading && loading.parentNode) loading.parentNode.removeChild(loading); }, 600);
      }
    })();

    // --- init Leaflet map with same stops as original file (kept data & popups) ---
    document.addEventListener('DOMContentLoaded', function(){
      // stops data -- same as your original content (kept images)
      const stops = [
        { name:"Podgorica (Inizio)", lat:42.378, lng:19.255, day:1, info:"Arrivo e ritiro auto", image:"https://cdn.getyourguide.com/image/format=auto,fit=crop,gravity=auto,quality=60,width=450,height=450,dpr=2/tour_img/eed27c2e7872e67037ab93473bc7c0779c59789598e18ca70e277d904124f704.jpg" },
        { name:"Kotor (Base)", lat:42.424, lng:18.771, day:1, info:"Pernottamento (3 Notti)", image:"https://static2-viaggi.corriereobjects.it/wp-content/uploads/2022/10/Apertura-iStock-951469758-ok.jpg.webp?v=1666977327" },
        { name:"Herceg Novi", lat:42.455, lng:18.535, day:2, info:"Visita e Cantina Savina", image:"https://dynamic-media-cdn.tripadvisor.com/media/photo-o/2b/9d/1a/58/caption.jpg?w=300&h=300&s=1" },
        { name:"Perast", lat:42.483, lng:18.692, day:3, info:"Nostra Signora delle Rocce", image:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRLgrVlOv-wgtsIJV6SBQbV9gVZ3i9dKBLEbQ&s" },
        { name:"Lovƒáen", lat:42.395, lng:18.847, day:4, info:"Mausoleo di Njego≈°", image:"https://t1.gstatic.com/licensed-image?q=tbn:ANd9GcQaoxdVOpBLK7WXbWXgzYV55IrmR6OHXC_GxanY-gCe8BN7nhTR0gcLxLXdfh33wBy_e5JarMLz6yPw4PcD" },
        { name:"Cetinje", lat:42.384, lng:18.924, day:4, info:"Capitale Reale", image:"https://static2-viaggi.corriereobjects.it/wp-content/uploads/2015/06/Cetinje-istock.jpg?v=1710778917" },
        { name:"Sveti Stefan", lat:42.256, lng:18.895, day:4, info:"Tappa Fotografica", image:"https://img1.advisor.travel/1314x680px-Sveti_Stefan_27.jpg" },
        { name:"Budva (Base)", lat:42.285, lng:18.848, day:4, info:"Pernottamento (2 Notti)", image:"https://cdn.getyourguide.com/image/format=auto,fit=contain,gravity=center,quality=60,width=1440,height=650,dpr=1/tour_img/65f6c813fd64112e643c92daa775eb4e46e06d354a39c50fb2db5f02ae9c47f8.jpeg" },
        { name:"Lago Skadar", lat:42.336, lng:19.123, day:5, info:"Pavlova Strana & Giro in barca", image:"https://mybestplace.com/uploads/2021/06/Lago-di-Skadar-Montenegro-COVER.jpg" },
        { name:"Podgorica (Fine)", lat:42.354, lng:19.279, day:6, info:"Riconsegna auto e Partenza", image:"https://cdn.getyourguide.com/image/format=auto,fit=crop,gravity=auto,quality=60,width=450,height=450,dpr=2/tour_img/eed27c2e7872e67037ab93473bc7c0779c59789598e18ca70e277d904124f704.jpg" }
      ];

      function getDayColor(d){
        const colors = {1:'#E91E63',2:'#FF9800',3:'#FFC107',4:'#4CAF50',5:'#2196F3',6:'#9C27B0'};
        return colors[d] || '#C2799B';
      }

      const map = L.map('map', { scrollWheelZoom:false }).setView([42.39,18.9],9);
      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',{maxZoom:19, attribution:'¬© OpenStreetMap contributors'}).addTo(map);

      stops.forEach(s=>{
        const iconHtml = `<div style="background:linear-gradient(135deg, ${getDayColor(s.day)}, ${getDayColor(s.day)}cc);width:36px;height:36px;border-radius:50%;display:flex;align-items:center;justify-content:center;color:#fff;font-weight:700;border:2px solid #fff;font-family:Fredoka, sans-serif">${s.day}</div>`;
        const marker = L.marker([s.lat,s.lng],{icon:L.divIcon({className:'',html:iconHtml,iconSize:[36,36],iconAnchor:[18,36]})}).addTo(map);

        const popupContent = `
          <div style="text-align:center;font-family:Fredoka, cursive;min-width:200px">
            <img src="${s.image}" alt="${s.name}" style="width:100%;height:110px;object-fit:cover;border-radius:6px;margin-bottom:8px" loading="lazy">
            <div style="background:${getDayColor(s.day)};color:white;padding:4px 10px;border-radius:12px;display:inline-block;margin-bottom:8px;font-weight:600">Giorno ${s.day}</div>
            <h4 style="margin:6px 0 4px">${s.name}</h4>
            <p style="margin:0;color:#666;font-size:13px">${s.info}</p>
          </div>
        `;
        marker.bindPopup(popupContent,{maxWidth:260,className:'custom-popup'});
      });

      // draw polyline (kept same route order as original)
      const coords = stops.map(s=>[s.lat,s.lng]);
      L.polyline(coords,{color:'#C2799B',weight:4,opacity:0.8,dashArray:'8,5'}).addTo(map);

      // ensure map is sized properly when inside responsive containers
      setTimeout(()=>map.invalidateSize(),350);
    });
  </script>
</body>
</html>
